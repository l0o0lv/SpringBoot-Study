# 댓글 컨트롤러와 서비스 만들기

REST 컨트롤러 : 댓글 REST API를 위한 컨트롤러로 서비스와 협업, 클라이언트 요청을 받아
응답하며 뷰가 아닌 데이터 반환  
서비스 : REST 컨트롤러와 레포지토리 사이에서 비즈니스 로직, 즉 처리 흐름을 담당하며 예외 상황이
발생했을 때 @Transaction으로 변경된 데이터 롤백  
DTO : 사용자에게 보여 줄 댓글 정보를 담은 것. 단순히 클라이언트와 서버 간에 댓글 JSON 전송.  
엔티티 : DB 데이터를 담는 자바 객체로 엔티티를 기반으로 테이블 생성, 레포지토리가 DB 속 데이터를
조회하거나 전달할 때 사용  
레포지토리 : 엔티티를 관리하는 인터페이스로 데이터 CRUD 등의 기능 제공, 서비스로부터 댓글
CRUD등의 명령을 받아 DB에 보내고 응답받음.

# 실습 중 작성
( ) = < >  

GETMapping의 반환형이 왜 댓글 엔티티 묶음인 List(CommentEntity)가 아니고 ResponseEntity(List(CommentDto)) 일까?  
DB에서 조회한 댓글 엔티티 목록은 List(CommentEntity)이지만 엔티티를 DTO로 변환하면 List(CommentDto)
실제 개발에서는 삼항 연산자보다 예외 처리 방식으로 한다.  
스트림은 컬렉션이나 리스트에 저장된 요소들을 하나씩 참조하며 반복 처리할 때 사용한다.  
map() 메소드를 사용하면 스트림에서 요소를 꺼내 조건에 맞게 변환할 수 있다.  
map(a -> b) : 스트림의 각 요소 a를 꺼내 b를 수행한 결과로 매핑.  
메소드의 반환형을 맞추기 위해 collect()메소드를 사용한다.  
Optional 객체는 null이 될 수도 있는 객체.  
orElseThrow 메소드는 Optional 객체에 값이 존재하면 그 값을 반환하고, 
값이 존재하지 않으면 전달값으로 보낸 예외를 발생시키는 메소드이다.  
전달값으로 IllegalArgumentException 클래스를 사용하면 메소드가 잘못됐거나 부적합한 전달값을
보냈음을 나타낸다.  
@JsonProperty는 Json 데이터의 키와 이를 받아 저장하는 DTO필드의 변수명이 다를 경우 사용한다. 
DTO 필드 위에 @JsonProperty("키_이름")을 작성해 주면 키와 변수가 자동으로 매핑된다.


# 스트림의 특징
원본 데이터를 읽기만 하고 변경하지 않는다.  
정렬된 결과를 컬렉션이나 배열에 담아 반화할 수 있다.  
내부 반복문으로 반복문이 코드상에 노출되지 않는다.